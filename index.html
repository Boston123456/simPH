<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>simPH by christophergandrud</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">simPH</h1>
      <h2 class="project-tagline">Tools for simulating and graphing results from proportional hazards survival models.</h2>
      <a href="https://github.com/christophergandrud/simPH" class="btn">View on GitHub</a>
      <a href="https://github.com/christophergandrud/simPH/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/christophergandrud/simPH/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="simph" class="anchor" href="#simph" aria-hidden="true"><span class="octicon octicon-link"></span></a>simPH</h1>

<p><img src="img/plotbanner.png" height="40" width="1000" alt="banner-image"></p>

<h3>
<a id="christopher-gandrud" class="anchor" href="#christopher-gandrud" aria-hidden="true"><span class="octicon octicon-link"></span></a>Christopher Gandrud</h3>

<h3>
<a id="version-132--" class="anchor" href="#version-132--" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version 1.3.2 <a href="https://travis-ci.org/christophergandrud/simPH"><img src="https://travis-ci.org/christophergandrud/simPH.png" alt="Build Status"></a> <img src="http://cranlogs.r-pkg.org/badges/last-month/simPH" alt="CRAN Downloads">
</h3>

<h4>
<a id="please-report-any-bugs-to" class="anchor" href="#please-report-any-bugs-to" aria-hidden="true"><span class="octicon octicon-link"></span></a>Please report any bugs to:</h4>

<p><a href="https://github.com/christophergandrud/simPH/issues">https://github.com/christophergandrud/simPH/issues</a></p>

<hr>

<p><strong>simPH</strong> is an R package for simulating and plotting quantities of interest
(relative hazards, first differences, and hazard ratios) for linear
coefficients, multiplicative interactions, polynomials, penalised splines, and
non-proportional hazards, as well as stratified survival curves from Cox
Proportional Hazard models.</p>

<p>For more information plus examples, please see the
<a href="http://ssrn.com/abstract=2318977">description paper</a> forthcoming in the
<a href="http://www.jstatsoft.org/">Journal of Statistical Software</a>.</p>

<p>To cite the paper please use:</p>

<pre><code>@article{simPH_JSS,
    author = {Christopher Gandrud},
    title = {simPH: An R Package for Illustrating Estimates from Cox
        Proportional Hazard Models Including for Interactive and Nonlinear
        Effects},
    journal = {Journal of Statistical Software},
    year = {2015},
    volume = {65},
    issue = {3},
    pages = {1--20}
}
</code></pre>

<h2>
<a id="functions" class="anchor" href="#functions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Functions</h2>

<p>The package includes the following functions:</p>

<h4>
<a id="simulation-functions" class="anchor" href="#simulation-functions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simulation Functions</h4>

<ul>
<li><p><code>coxsimLinear</code>: a function for simulating relative hazards, first differences,
hazard ratios, and hazard rates for linear, non-time interacted covariates from
Cox Proportional Hazard models.</p></li>
<li><p><code>coxsimtvc</code>: a function for simulating time interactive hazards (relative
hazards, first differences, and hazard ratios) for covariates from Cox
Proportional Hazard models. The function will calculate time-interactive hazard
ratios for multiple strata estimated from a stratified Cox Proportional Hazard
model.</p></li>
<li><p><code>coxsimSpline</code>: a function for simulating quantities of interest from
penalised splines using multivariate normal distributions. Currently does not
support simulating hazard rates from stratified models. <strong>Note:</strong> be extremely
careful about the number of simulations you ask the function to find. It is very
easy to ask for more than your computer can handle.</p></li>
<li><p><code>coxsimPoly</code>: a function for simulating quantities of interest for a range of
values for a polynomial nonlinear effect from Cox Proportional Hazard models.</p></li>
<li><p><code>coxsimInteract</code>: a function for simulating quantities of interest for linear
multiplicative interactions, including marginal effects and hazard rates.</p></li>
</ul>

<h4>
<a id="plotting-functions" class="anchor" href="#plotting-functions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Plotting Functions</h4>

<p>Results from these functions can be plotted using the <code>simGG</code> method. The
syntax and capabilities of <code>simGG</code> varies depending on the <code>sim</code> object class
you are using:</p>

<ul>
<li><p><code>simGG.simlinear</code>: plots simulated linear time-constant hazards using
<a href="http://ggplot2.org/">ggplot2</a>.</p></li>
<li><p><code>simGG.simtvc</code>: uses <strong>ggplot2</strong> to graph the simulated time-varying relative
hazards, first differences, hazard ratios or stratified hazard rates.</p></li>
<li><p><code>simGG.simspline</code>: uses <strong>ggplot2</strong> to plot
quantities of interest from <code>simspline</code> objects, including relative hazards,
first differences, hazard ratios, and hazard rates.</p></li>
<li><p><code>simGG.simpoly</code>: uses <strong>ggplot2</strong> to graph the simulated polynomial quantities
of interest.</p></li>
<li><p><code>simGG.siminteract</code>: uses <strong>ggplot2</strong> to graph linear multiplicative
interactions.</p></li>
</ul>

<h5>
<a id="additional-styling" class="anchor" href="#additional-styling" aria-hidden="true"><span class="octicon octicon-link"></span></a>Additional styling</h5>

<p>Because in almost all cases <code>simGG</code> returns a <em>ggplot2</em> object, you can add
additional aesthetic attributes in the normal <em>ggplot2</em> way. See the
<a href="http://docs.ggplot2.org">ggplot2 documentation for more details</a>.</p>

<h4>
<a id="misc" class="anchor" href="#misc" aria-hidden="true"><span class="octicon octicon-link"></span></a>Misc.</h4>

<ul>
<li><p><code>SurvExpand</code>: a function for converting a data frame of non-equal interval
continuous observations into equal interval continuous observations. This is
useful to do before creating time interactions.</p></li>
<li><p><code>tvc</code>: a function for creating time interactions. Currently supports
<code>'linear'</code>, natural <code>'log'</code>, and exponentiation (<code>'power'</code>).</p></li>
<li><p><code>setXl</code>: a function for setting valid <code>Xl</code> values given a sequence of fitted
<code>Xj</code> values. This makes it more intuitive to find hazard ratios and first
differences for comparisons between some Xj fitted values and Xl values other
than 0.</p></li>
<li><p><code>ggfitStrata</code>: a function to plot fitted stratified survival curves estimated
from <code>survfit</code> using <strong>ggplot2</strong>. This function builds on the <strong>survival</strong>
package's <code>plot.survfit</code> function. One major advantage is the ability to split
the survival curves into multiple plots and arrange them in a grid. This makes
it easier to examine many strata at once. Otherwise they can be very bunched up.</p></li>
<li><p><code>MinMaxLines</code>: a function for summarising the constricted intervals from the
simulations, including the median, upper and lower bounds and
the middle 50% of these intervals.</p></li>
</ul>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>The package is available on CRAN and can be installed in the normal R way.</p>

<p>To install the development version use the
<a href="https://github.com/hadley/devtools">devtools</a> function <code>install_github</code>. Here
is the code for installing the most recent development version:</p>

<div class="highlight highlight-S"><pre>devtools::install_github(<span class="pl-s"><span class="pl-pds">'</span>christophergandrud/simPH<span class="pl-pds">'</span></span>)</pre></div>

<h2>
<a id="tip" class="anchor" href="#tip" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tip</h2>

<p>Before running the simulation and graph functions in this package carefully
consider how many simulations you are about to make. Especially for hazard rates
over long periods of time and with multiple strata, you can be asking <strong>simPH</strong>
to run very many simulations. This will be computationally intensive.</p>

<h2>
<a id="sources" class="anchor" href="#sources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sources</h2>

<h3>
<a id="simulating-parameter-estimates" class="anchor" href="#simulating-parameter-estimates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simulating Parameter Estimates</h3>

<p>For more information about simulating parameter estimates to make interpretation
of results easier see:</p>

<p>Licht, Amanda A. 2011. <a href="http://pan.oxfordjournals.org/content/19/2/227.abstract">“Change Comes with Time: Substantive Interpretation of Nonproportional Hazards in Event History Analysis.”</a>
<em>Political Analysis</em> 19: 227–43.</p>

<p>King, Gary, Michael Tomz, and Jason Wittenberg. 2000.
<a href="http://www.jstor.org/stable/2669316">“Making the Most of Statistical Analyses: Improving Interpretation and Presentation.”</a> <em>American Journal of Political Science</em> 44(2): 347–61.</p>

<h3>
<a id="stratified-cox-ph" class="anchor" href="#stratified-cox-ph" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stratified Cox PH</h3>

<p>For more information about stratified Cox PH models (and frailties, which I am
working to incorporate in future versions) see:</p>

<p>Box-Steffensmeier, Janet M, and Suzanna De Boef. 2006. <a href="http://onlinelibrary.wiley.com/doi/10.1002/sim.2434/abstract;jsessionid=28218243DD3D6E01A3D10EEE75D96675.d01t02">“Repeated Events Survival Models: the Conditional Frailty Model.”</a> <em>Statistics in Medicine</em> 25(20): 3518–33.</p>

<h3>
<a id="shortest-probability-intervals" class="anchor" href="#shortest-probability-intervals" aria-hidden="true"><span class="octicon octicon-link"></span></a>Shortest Probability Intervals</h3>

<p>To learn more about shortest probability intervals (and also for the source of
the code that made this possible in <strong>simPH</strong>) see:</p>

<p>Liu, Y., Gelman, A., &amp; Zheng, T. (2013).
<a href="http://arxiv.org/pdf/1302.2142v1.pdf">"Simulation-efficient Shortest Probablility Intervals."</a>
<em>Arvix</em>.</p>

<p><strong>Also good:</strong> Hyndman, R. J. (1996).
<a href="http://www.jstor.org/stable/10.2307/2684423">"Computing and Graphing Highest Density Regions."</a>
<em>The American Statistician</em>, 50(2): 120–126.</p>

<h3>
<a id="interpreting-interactions" class="anchor" href="#interpreting-interactions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Interpreting Interactions</h3>

<p>For more information about interpreting interaction terms:</p>

<p>Brambor, Thomas, William Roberts Clark, and Matt Golder. 2006.
<a href="http://pan.oxfordjournals.org/content/14/1/63.abstract">“Understanding Interaction Models: Improving Empirical Analyses.”</a>
<em>Political Analysis</em> 14(1): 63–82.</p>

<h3>
<a id="the-olden-days" class="anchor" href="#the-olden-days" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Olden Days</h3>

<p>For an example of how non-proportional hazard results were often presented
before <strong>simPH</strong> see (some of the problems I encountered in this paper were a
major part of why I'm developing this package):</p>

<p>Gandrud, Christopher. 2013. <a href="http://www.tandfonline.com/doi/full/10.1080/09692290.2012.727362">“The Diffusion of Financial Supervisory Governance Ideas.”</a>
<em>Review of International Political Economy</em>. 20(4): 881-916.</p>

<h2>
<a id="future-plans" class="anchor" href="#future-plans" aria-hidden="true"><span class="octicon octicon-link"></span></a>Future Plans</h2>

<p>I intend to expand the quantities of interest that can be simulated and graphed
for Cox PH models. I am also currently working on functions that can simulate
and graph hazard ratios estimated from
<a href="http://www.jstor.org/stable/2670170">Fine and Gray competing risks models</a>.</p>

<p>I am also working on a way to graph hazard ratios with frailties.</p>

<hr>

<p>Licensed under <a href="https://github.com/christophergandrud/simPH/blob/master/LICENSE.md">GPL-3</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/christophergandrud/simPH">simPH</a> is maintained by <a href="https://github.com/christophergandrud">christophergandrud</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-985930-7");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

